---
title: Providers
description: Available codec providers and their characteristics
author: zoobzio
published: 2025-12-27
updated: 2025-12-27
tags:
  - Providers
  - JSON
  - XML
  - YAML
  - MessagePack
---

# Providers

Four codec providers are included, each in its own package.

## JSON

```go
import "github.com/zoobzio/codec/pkg/json"

codec := json.New()
```

| Property | Value |
|----------|-------|
| Content-Type | `application/json` |
| Human readable | Yes |
| Binary support | Base64 encoding |
| Struct tag | `json` |

Standard library `encoding/json` under the hood.

## XML

```go
import "github.com/zoobzio/codec/pkg/xml"

codec := xml.New()
```

| Property | Value |
|----------|-------|
| Content-Type | `application/xml` |
| Human readable | Yes |
| Binary support | Base64 encoding |
| Struct tag | `xml` |

Standard library `encoding/xml` under the hood.

**Note:** XML uses different struct tags than JSON:

```go
// JSON
type User struct {
    ID string `json:"id"`
}

// XML
type User struct {
    ID string `xml:"id"`
}
```

## YAML

```go
import "github.com/zoobzio/codec/pkg/yaml"

codec := yaml.New()
```

| Property | Value |
|----------|-------|
| Content-Type | `application/yaml` |
| Human readable | Yes |
| Binary support | Base64 encoding |
| Struct tag | `yaml` |

Uses `gopkg.in/yaml.v3`.

## MessagePack

```go
import "github.com/zoobzio/codec/pkg/msgpack"

codec := msgpack.New()
```

| Property | Value |
|----------|-------|
| Content-Type | `application/msgpack` |
| Human readable | No |
| Binary support | Native |
| Struct tag | `msgpack` or `json` |

Uses `github.com/vmihailenco/msgpack/v5`. Falls back to `json` tags if `msgpack` tags are not present.

## Choosing a Provider

| Use Case | Recommended |
|----------|-------------|
| REST APIs | JSON |
| Configuration files | YAML |
| Document interchange | XML |
| High-performance RPC | MessagePack |
| Debugging | JSON or YAML |

## Provider Independence

The same type works with any provider that uses compatible struct tags:

```go
type User struct {
    ID    string `json:"id" yaml:"id" msgpack:"id"`
    Email string `json:"email" yaml:"email" msgpack:"email" mask:"email"`
}

jsonSer, _ := codec.NewSerializer[User](json.New(), opts...)
yamlSer, _ := codec.NewSerializer[User](yaml.New(), opts...)
msgpackSer, _ := codec.NewSerializer[User](msgpack.New(), opts...)
```

Sanitization tags (`mask`, `encrypt`, etc.) are provider-agnostic.

## Custom Providers

Implement the `Codec` interface:

```go
type Codec interface {
    ContentType() string
    Marshal(v any) ([]byte, error)
    Unmarshal(data []byte, v any) error
}
```

Example for a hypothetical TOML provider:

```go
type tomlCodec struct{}

func New() codec.Codec { return &tomlCodec{} }

func (c *tomlCodec) ContentType() string { return "application/toml" }

func (c *tomlCodec) Marshal(v any) ([]byte, error) {
    return toml.Marshal(v)
}

func (c *tomlCodec) Unmarshal(data []byte, v any) error {
    return toml.Unmarshal(data, v)
}
```
