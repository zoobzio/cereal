---
title: Masking
description: Content-aware partial masking for sensitive data
author: zoobzio
published: 2025-12-27
updated: 2025-12-27
tags:
  - Masking
  - Redaction
  - Privacy
---

# Masking

Masking partially obscures sensitive data while preserving format and some identifying information.

## Built-in Mask Types

Eight content-aware maskers are built in:

| Type | Example Input | Example Output |
|------|---------------|----------------|
| `ssn` | `123-45-6789` | `***-**-6789` |
| `email` | `alice@example.com` | `a***@example.com` |
| `phone` | `(555) 123-4567` | `(***) ***-4567` |
| `card` | `4111111111111111` | `************1111` |
| `ip` | `192.168.1.100` | `192.168.xxx.xxx` |
| `uuid` | `550e8400-e29b-41d4-a716-446655440000` | `550e8400-****-****-****-************` |
| `iban` | `GB82WEST12345698765432` | `GB82**************5432` |
| `name` | `John Smith` | `J*** S****` |

## Usage

Maskers are built in and require no registration:

```go
type Customer struct {
    Email   string `json:"email" mask:"email"`
    SSN     string `json:"ssn" mask:"ssn"`
    Phone   string `json:"phone" mask:"phone"`
    Card    string `json:"card" mask:"card"`
}

func (c Customer) Clone() Customer { return c }

// No WithMasker option needed
ser, _ := codec.NewSerializer[Customer](json.New())

customer := &Customer{
    Email: "alice@example.com",
    SSN:   "123-45-6789",
    Phone: "(555) 123-4567",
    Card:  "4111111111111111",
}

data, _ := ser.Marshal(customer)
// {"email":"a***@example.com","ssn":"***-**-6789","phone":"(***) ***-4567","card":"************1111"}
```

## Redaction

For complete replacement instead of partial masking, use `redact`:

```go
type Note struct {
    Content string `json:"content" redact:"[REDACTED]"`
    Secret  string `json:"secret" redact:"***"`
}
```

The entire value is replaced with the tag value.

## Masking vs Redaction

| Aspect | Masking | Redaction |
|--------|---------|-----------|
| Preserves format | Yes | No |
| Shows partial data | Yes | No |
| Human readable | Yes | Yes |
| Useful for debugging | More | Less |

Choose masking when format or partial identification helps. Choose redaction when no information should leak.

## Edge Cases

Maskers handle edge cases gracefully:

```go
// Short values
mask:"email" on "a@b.c"      -> "a***@b.c"
mask:"ssn" on "123"          -> "***"
mask:"card" on "1234"        -> "****"

// Empty values
mask:"email" on ""           -> ""
```

## Not Reversible

Masked and redacted values cannot be restored:

```go
user := &User{Email: "alice@example.com"}
data, _ := ser.Marshal(user)

restored, _ := ser.Unmarshal(data)
// restored.Email == "a***@example.com" (not original)
```

For reversible transformations, use `encrypt`.
